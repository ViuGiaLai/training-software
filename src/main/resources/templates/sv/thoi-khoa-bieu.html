<div data-fragment="content" th:fragment="content">
    <div class="container mt-4">
        <h3 class="mb-3">Thời khóa biểu tuần 
            <span th:text="${#temporals.format(weekStart, 'dd/MM/yyyy')}"></span> - 
            <span th:text="${#temporals.format(weekEnd, 'dd/MM/yyyy')}"></span>
        </h3>
        <div th:if="${noSchedule != null}" class="alert alert-warning text-center" th:text="${noSchedule}"></div>
        <table class="table table-bordered tkb-table" th:if="${noSchedule == null}">
            <thead class="table-primary">
                <tr>
                    <th>Tiết</th>
                    <th th:each="i : ${#numbers.sequence(0,6)}">
                        <span th:text="${#temporals.format(weekStart.plusDays(i), 'EEEE')}"></span><br>
                        <span th:text="${#temporals.format(weekStart.plusDays(i), 'dd/MM/yyyy')}"></span>
                    </th>
                </tr>
            </thead>
            <style>

.tkb-table tbody tr {
    transition: background 0.2s;
}
.tkb-table tbody tr:hover {
    background: #f1f8ff;
}
.tkb-table td:first-child {
    background: #f5faff;
    font-weight: 600;
    color: #1976d2;
    border-right: 2px solid #e3e6f0;
    min-width: 90px;
}
.tkb-table td {
    vertical-align: middle;
    min-width: 120px;
    max-width: 180px;
    padding: 10px 6px;
    background: #fff;
}
.tkb-cell {
    background: #e3f2fd;
    border-radius: 8px;
    padding: 8px 6px;
    margin: 2px 0;
    box-shadow: 0 2px 8px rgba(33,150,243,0.07);
    border-left: 4px solid #1976d2;
    transition: background 0.2s, box-shadow 0.2s;
}
.tkb-cell span {
    display: block;
    font-size: 13px;
    color: #444;
    margin-top: 2px;
}
@media (max-width: 900px) {
    .tkb-table td { min-width: 70px; max-width: 120px; padding: 6px 2px; }
    .tkb-cell { padding: 5px 2px; font-size: 12px; }
}
</style>
            <tbody>
                <tr th:each="period : ${periods}">
                    <td>
                        <div th:text="${period.name}"></div>
                        <div class="text-muted small" th:text="${period.startTime} + ' - ' + ${period.endTime}"></div>
                    </td>
                    <td th:each="i : ${#numbers.sequence(0,6)}">
                        <th:block th:with="cellDate=${weekStart.plusDays(i)}">
                            <div th:each="schedule : ${schedules}">
                                <div th:if="${schedule.period != null 
                                             and schedule.period.id == period.id 
                                             and schedule.date != null 
                                             and schedule.date.toString() == cellDate.toString()}"
                                     class="tkb-cell">
                                    <strong th:text="${schedule.subject != null ? 'Môn: ' + schedule.subject.name : ''}"></strong><br>
                                    <span th:text="${schedule.teacher != null ? 'GV: ' + schedule.teacher.fullName : ''}"></span><br>
                                    <span th:text="${schedule.room != null ? schedule.room.name : ''}"></span>
                                </div>
                            </div>
                        </th:block>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>